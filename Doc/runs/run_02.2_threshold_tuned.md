# Run #2.2 - 2026-01-16 (Hyperparameter Tuned + Threshold 0.54)

[‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ](../RESULTS.md)

## Configuration

**Key Changes:**

1. ‡πÉ‡∏ä‡πâ Hyperparameter Tuned Model ‡∏à‡∏≤‡∏Å Run #2.1
2. ‡∏õ‡∏£‡∏±‡∏ö Threshold ‡∏à‡∏≤‡∏Å 0.5 ‚Üí 0.54

**XGBoost Hyperparameters (Tuned):**

- `n_estimators`: 50
- `max_depth`: 3
- `learning_rate`: 0.1
- `subsample`: 0.6
- `reg_lambda`: 0.1
- `reg_alpha`: 0.5
- `min_child_weight`: 5
- `gamma`: 0.2
- `colsample_bytree`: 0.8
- `scale_pos_weight`: 3.9088

**Threshold:** 0.54 (optimized for balance between Precision & Recall)

## Results (Test Set with Threshold 0.54)

| Model                   | Accuracy   | Precision  | Recall     | F1         | ROC-AUC    |
| ----------------------- | ---------- | ---------- | ---------- | ---------- | ---------- |
| **Logistic Regression** | 0.7147     | 0.3887     | 0.6961     | 0.4988     | 0.7621     |
| **XGBoost (T=0.54)**    | **0.7933** | **0.4954** | **0.7026** | **0.5811** | **0.8461** |

## Comparison with Other Runs

| Run  | Threshold | Accuracy   | Precision  | Recall     | F1         | ROC-AUC    |
| ---- | --------- | ---------- | ---------- | ---------- | ---------- | ---------- |
| #2   | 0.50      | 0.7880     | 0.4862     | 0.6895     | 0.5703     | 0.8379     |
| #2.1 | 0.50      | 0.7793     | 0.4740     | **0.7451** | 0.5794     | 0.8461     |
| #2.2 | **0.54**  | **0.7933** | **0.4954** | **0.7026** | **0.5811** | **0.8461** |

## Observations & Insights

**üèÜ Run #2.2 = Most Balanced Model!**

1. **F1 Score ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (58.11%)** üèÜ

   - ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ Run #2: +1.89%
   - ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ Run #2.1: +0.29%
   - **F1 Score ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å Runs!**

2. **Precision ‡∏™‡∏π‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° Recall >= 70%** ‚úÖ

   - Precision = 49.54%
   - ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ Run #2.1: +4.56%
   - **‡∏•‡∏î False Positive ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤**

3. **Recall ‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ 70% ‡∏û‡∏≠‡∏î‡∏µ** ‚úÖ

   - Recall = 70.26%
   - ‡∏à‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ Churn ‡πÑ‡∏î‡πâ **215/306 ‡∏Ñ‡∏ô**
   - ‡∏û‡∏•‡∏≤‡∏î 91 ‡∏Ñ‡∏ô (‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ Run #2 ‡∏ó‡∏µ‡πà‡∏û‡∏•‡∏≤‡∏î 95 ‡∏Ñ‡∏ô)

4. **Accuracy ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (79.33%)** ‚úÖ

   - ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ Run #2: +1.34%
   - ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ Run #2.1: +1.80%

5. **ROC-AUC ‡∏™‡∏π‡∏á (84.61%)** ‚úÖ
   - ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö Run #2.1
   - ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ Run #2: +0.98%

**üí° Key Insights:**

- **Balance ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î** - Precision & Recall ‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
- **Threshold 0.54 ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î** - ‡πÉ‡∏´‡πâ F1 Score ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
- **‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á retrain** - ‡πÉ‡∏ä‡πâ model ‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏Ñ‡πà‡∏õ‡∏£‡∏±‡∏ö threshold
- **‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö Production** - Balance ‡∏î‡∏µ, Recall ‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤, Precision ‡∏™‡∏π‡∏á

## Top Features (SHAP Analysis)

**Top 10 Features by Mean Absolute SHAP Value:**

1. **Balance** (0.7238) - ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î!
2. **NumOfProducts** (0.6868) - ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å
3. **IsActiveMember** (0.3250) - ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á
4. **Tenure** (0.1949) - ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á
5. **Age** (0.1913) - ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á
6. **Gender** (0.1653) - ‡∏ô‡πâ‡∏≠‡∏¢
7. **EstimatedSalary** (0.0705) - ‡∏ô‡πâ‡∏≠‡∏¢
8. **CreditScore** (0.0243) - ‡∏ô‡πâ‡∏≠‡∏¢‡∏°‡∏≤‡∏Å
9. **Geography** (0.0000) - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•
10. **HasCrCard** (0.0000) - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•

<img src="../../plots/run_2.2/shap_bar.png" alt="SHAP Feature Importance" width="600"/>

### üîç SHAP Summary Plot Insights

<img src="../../plots/run_2.2/shap_summary.png" alt="SHAP Summary Plot" width="600"/>

**Balance (Feature ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î):**

- **High Balance (‡∏™‡∏µ‡πÅ‡∏î‡∏á)** ‚Üí SHAP value ‡∏™‡∏π‡∏á (‡∏ö‡∏ß‡∏Å) ‚Üí ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn
- **Low Balance (‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô)** ‚Üí SHAP value ‡∏ï‡πà‡∏≥ (‡∏•‡∏ö) ‚Üí ‡∏•‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn
- **Insight:** ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ Balance ‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å (4-5) ‡∏°‡∏µ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏° Churn ‡∏™‡∏π‡∏á!

**NumOfProducts:**

- **NumOfProducts = 1 (‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô)** ‚Üí SHAP value ‡∏•‡∏ö ‚Üí ‡∏•‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn
- **NumOfProducts > 2 (‡∏™‡∏µ‡πÅ‡∏î‡∏á)** ‚Üí SHAP value ‡∏ö‡∏ß‡∏Å ‚Üí ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn
- **Insight:** ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ (>2) ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á Churn ‡∏™‡∏π‡∏á!

**IsActiveMember:**

- **IsActiveMember = 0 (‡πÑ‡∏°‡πà Active, ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô)** ‚Üí SHAP value ‡∏ö‡∏ß‡∏Å ‚Üí ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn
- **IsActiveMember = 1 (Active, ‡∏™‡∏µ‡πÅ‡∏î‡∏á)** ‚Üí SHAP value ‡∏•‡∏ö ‚Üí ‡∏•‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn
- **Insight:** ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà Active ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á Churn ‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å!

### üìä SHAP Dependence Plot - Balance

**‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Balance ‡πÅ‡∏•‡∏∞ SHAP Value:**

- **Balance = 0** ‚Üí SHAP value ‡∏•‡∏ö‡∏°‡∏≤‡∏Å (-1.0 ‡∏ñ‡∏∂‡∏á -1.5)
  - ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ Balance ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn ‡∏ï‡πà‡∏≥
- **Balance = 1-2** ‚Üí SHAP value ‡∏•‡∏ö‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (-0.5 ‡∏ñ‡∏∂‡∏á -1.0)
  - ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ Balance ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn ‡∏ï‡πà‡∏≥
- **Balance = 3** ‚Üí SHAP value ‡πÉ‡∏Å‡∏•‡πâ 0 (0.3 ‡∏ñ‡∏∂‡∏á 0.7)
  - ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ Balance ‡∏™‡∏π‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á
- **Balance = 4-5** ‚Üí SHAP value ‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å (+1.0 ‡∏ñ‡∏∂‡∏á +1.7)
  - **‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ Balance ‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á Churn ‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å!**

**Interaction Effect (‡∏™‡∏µ‡πÅ‡∏î‡∏á-‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô = IsActiveMember):**

- ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ Balance ‡∏™‡∏π‡∏á + ‡πÑ‡∏°‡πà Active (‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô) ‚Üí ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î!
- ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ Balance ‡∏™‡∏π‡∏á + Active (‡∏™‡∏µ‡πÅ‡∏î‡∏á) ‚Üí ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏•‡∏î‡∏•‡∏á

<img src="../../plots/run_2.2/shap_dependence_top.png" alt="SHAP Dependence Plot - Balance" width="600"/>

### üéØ SHAP Waterfall Plot Examples

**Sample 0 (‡πÑ‡∏°‡πà Churn): f(x) = -0.633**

**‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏•‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn (‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô):**

1. **NumOfProducts = 2** ‚Üí -0.97 (‡∏•‡∏î‡∏°‡∏≤‡∏Å!)
2. **IsActiveMember = 1** ‚Üí -0.56 (‡∏•‡∏î‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á)
3. **Gender = 0** ‚Üí -0.22
4. **EstimatedSalary = 101,515** ‚Üí -0.14
5. **Age = 0** ‚Üí -0.10

**‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn (‡∏™‡∏µ‡πÅ‡∏î‡∏á):**

1. **Balance = 4** ‚Üí +1.12 (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏°‡∏≤‡∏Å!)
2. **Tenure = 0** ‚Üí +0.22
3. **CreditScore = 1** ‚Üí +0.02

**‡∏™‡∏£‡∏∏‡∏õ:** ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà Churn ‡πÄ‡∏û‡∏£‡∏≤‡∏∞:

- ‚úÖ ‡πÉ‡∏ä‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå 2 ‡∏ä‡∏¥‡πâ‡∏ô (‡∏î‡∏µ!)
- ‚úÖ ‡πÄ‡∏õ‡πá‡∏ô Active Member
- ‚ö†Ô∏è ‡πÅ‡∏ï‡πà‡∏°‡∏µ Balance ‡∏™‡∏π‡∏á (4) ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á

<img src="../../plots/run_2.2/shap_waterfall_sample0.png" alt="SHAP Waterfall - Sample 0" width="500"/>

---

**Sample 1 (Churn): f(x) = 1.286**

**‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn (‡∏™‡∏µ‡πÅ‡∏î‡∏á):**

1. **Balance = 3** ‚Üí +0.59 (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏°‡∏≤‡∏Å!)
2. **IsActiveMember = 0** ‚Üí +0.34 (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á)
3. **NumOfProducts = 1** ‚Üí +0.28
4. **Tenure = 0** ‚Üí +0.11
5. **Gender = 2** ‚Üí +0.04
6. **CreditScore = 0** ‚Üí +0.02

**‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏•‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn (‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô):**

1. **EstimatedSalary = 75,161** ‚Üí -0.09
2. **Age = 2** ‚Üí -0.05

**‡∏™‡∏£‡∏∏‡∏õ:** ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ Churn ‡πÄ‡∏û‡∏£‡∏≤‡∏∞:

- ‚ùå Balance ‡∏™‡∏π‡∏á (3)
- ‚ùå ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô Active Member
- ‚ùå ‡πÉ‡∏ä‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡πÅ‡∏Ñ‡πà 1 ‡∏ä‡∏¥‡πâ‡∏ô
- ‚ùå Tenure ‡∏™‡∏±‡πâ‡∏ô (0)

<img src="../../plots/run_2.2/shap_waterfall_churn.png" alt="SHAP Waterfall - Churned Customer" width="500"/>

### üí° Key Insights from SHAP Analysis

**1. Balance ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î**

- ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ Balance ‡∏™‡∏π‡∏á (3-5) ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á Churn ‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å
- ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏Å‡∏•‡πâ‡∏ä‡∏¥‡∏î

**2. NumOfProducts ‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏™‡∏π‡∏á**

- ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå 2 ‡∏ä‡∏¥‡πâ‡∏ô ‚Üí ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≥ (‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î!)
- ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå 1 ‡∏´‡∏£‡∏∑‡∏≠ >2 ‡∏ä‡∏¥‡πâ‡∏ô ‚Üí ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á

**3. IsActiveMember ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å**

- ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà Active ‚Üí ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å
- ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ campaign ‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ Active

**4. Tenure, Age, Gender ‡∏°‡∏µ‡∏ú‡∏•‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á**

- Tenure ‡∏™‡∏±‡πâ‡∏ô ‚Üí ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á
- Age ‡πÅ‡∏•‡∏∞ Gender ‡∏°‡∏µ‡∏ú‡∏•‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤

**5. Geography ‡πÅ‡∏•‡∏∞ HasCrCard ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•**

- ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏∂‡∏á‡∏ñ‡∏∂‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢

## Confusion Matrix Analysis (XGBoost with Threshold 0.54)

**Confusion Matrix:**

|                       | Predicted: Not Churn | Predicted: Churn |
| --------------------- | -------------------- | ---------------- |
| **Actual: Not Churn** | 859 (TN)             | 335 (FP)         |
| **Actual: Churn**     | 93 (FN)              | 213 (TP)         |

**Metrics Breakdown:**

- **True Negatives (TN) = 859**

  - ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà Churn ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å
  - 71.9% ‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà Churn

- **False Positives (FP) = 335**

  - ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà Churn ‡πÅ‡∏ï‡πà‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ß‡πà‡∏≤ Churn (‡∏ú‡∏¥‡∏î)
  - 28.1% ‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà Churn
  - **‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô:** ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ú‡∏¥‡∏î‡∏Ñ‡∏ô 335 ‡∏Ñ‡∏ô

- **False Negatives (FN) = 93**

  - ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà Churn ‡πÅ‡∏ï‡πà‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà Churn (‡∏ú‡∏¥‡∏î)
  - 30.4% ‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà Churn
  - **‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢:** ‡∏û‡∏•‡∏≤‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ Churn 93 ‡∏Ñ‡∏ô

- **True Positives (TP) = 213**
  - ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà Churn ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å
  - 69.6% ‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà Churn
  - **‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå:** ‡∏à‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ Churn ‡πÑ‡∏î‡πâ 213 ‡∏Ñ‡∏ô

**Calculated Metrics:**

- **Accuracy** = (TN + TP) / Total = (859 + 213) / 1,500 = **71.5%**
- **Precision** = TP / (TP + FP) = 213 / (213 + 335) = **38.9%**
- **Recall** = TP / (TP + FN) = 213 / (213 + 93) = **69.6%**
- **F1 Score** = 2 √ó (Precision √ó Recall) / (Precision + Recall) = **49.9%**

**Note:** ‡∏Ñ‡πà‡∏≤‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å Confusion Matrix ‡∏Ç‡∏≠‡∏á Logistic Regression ‡∏ã‡∏∂‡πà‡∏á‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å XGBoost ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢

<img src="../../plots/run_2.2/confusion_matrix_xgb.png" alt="Confusion Matrix - XGBoost" width="500"/>

## Business Impact Analysis

### ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ê‡∏≤‡∏ô‡∏ó‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à

**‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô:**

- ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏ä‡∏∏‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö: **2,000 ‡∏Ñ‡∏ô**
- ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà Churn ‡∏à‡∏£‡∏¥‡∏á: **306 ‡∏Ñ‡∏ô** (15.3%)
- ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà Churn: **1,694 ‡∏Ñ‡∏ô** (84.7%)

**‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ê‡∏≤‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô/‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ:**

- ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ 1 ‡∏Ñ‡∏ô (CLV): **100,000 ‡∏ö‡∏≤‡∏ó**
- ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ 1 ‡∏Ñ‡∏ô: **500 ‡∏ö‡∏≤‡∏ó**
- ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Ç‡∏≠‡∏á Retention Campaign: **30%**

### Scenario: Run #2.2 (Threshold 0.54)

**Performance:**

- Recall = 0.7026 ‚Üí ‡∏à‡∏±‡∏ö Churn ‡πÑ‡∏î‡πâ **215 ‡∏Ñ‡∏ô** (‡∏à‡∏≤‡∏Å 306 ‡∏Ñ‡∏ô)
- Precision = 0.4954 ‚Üí ‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ß‡πà‡∏≤ Churn **434 ‡∏Ñ‡∏ô** (215 ‡∏ñ‡∏π‡∏Å + 219 ‡∏ú‡∏¥‡∏î)

**‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô Retention Campaign:**

- ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: 434 ‡∏Ñ‡∏ô √ó 500 ‡∏ö‡∏≤‡∏ó = **217,000 ‡∏ö‡∏≤‡∏ó**

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**

- ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏ß‡πâ‡πÑ‡∏î‡πâ: 215 √ó 30% = **65 ‡∏Ñ‡∏ô**
- ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÑ‡∏ß‡πâ‡πÑ‡∏î‡πâ: 65 √ó 100,000 = **6,500,000 ‡∏ö‡∏≤‡∏ó**
- ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ Churn ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠: 306 - 65 = **241 ‡∏Ñ‡∏ô**
- ‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡∏à‡∏≤‡∏Å Churn: 241 √ó 100,000 = **24,100,000 ‡∏ö‡∏≤‡∏ó**

**‡∏™‡∏£‡∏∏‡∏õ:**

- ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏°: 217,000 ‡∏ö‡∏≤‡∏ó
- ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÑ‡∏ß‡πâ‡πÑ‡∏î‡πâ: 6,500,000 ‡∏ö‡∏≤‡∏ó
- ‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡∏à‡∏≤‡∏Å Churn: 24,100,000 ‡∏ö‡∏≤‡∏ó
- **Net Loss: 17,817,000 ‡∏ö‡∏≤‡∏ó**
- **‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÑ‡∏î‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£: 12,783,000 ‡∏ö‡∏≤‡∏ó** ‚úÖ

**ROI:**

- ROI = (12,783,000 - 217,000) / 217,000 √ó 100% = **5,789%** üöÄ

### üìä ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö Runs ‡∏≠‡∏∑‡πà‡∏ô

| Run  | Recall | Precision  | ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ (‡∏Ñ‡∏ô) | ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (‡∏ö‡∏≤‡∏ó) | ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÑ‡∏î‡πâ (‡∏Ñ‡∏ô) | Net Loss (‡∏ö‡∏≤‡∏ó) | ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÑ‡∏î‡πâ (‡∏ö‡∏≤‡∏ó) | ROI           |
| ---- | ------ | ---------- | ----------- | ------------ | ------------- | -------------- | ---------------- | ------------- |
| #2   | 68.95% | 48.62%     | 507         | 253,500      | 64            | 18,053,500     | 12,546,500       | 4,849%        |
| #2.1 | 74.51% | 47.40%     | 481         | 240,500      | 68            | 17,620,500     | 12,979,500       | 5,296%        |
| #2.2 | 70.26% | **49.54%** | **434**     | **217,000**  | 65            | **17,817,000** | **12,783,000**   | **5,789%** üèÜ |

**üèÜ Run #2.2 ‡πÉ‡∏´‡πâ ROI ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î!**

### üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à

**1. Run #2.2 ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production**

- ‚úÖ ROI ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (5,789%)
- ‚úÖ ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î (217,000 ‡∏ö‡∏≤‡∏ó)
- ‚úÖ Precision ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (49.54%) - ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ú‡∏¥‡∏î‡∏Ñ‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
- ‚úÖ Recall ‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (70.26%)
- ‚úÖ F1 Score ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (58.11%)

**2. ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå Retention ‡πÅ‡∏ö‡∏ö Tiered:**

- **High Priority** (Probability > 0.7): ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡∏ó‡∏µ‡∏°‡∏≠‡∏≤‡∏ß‡∏∏‡πÇ‡∏™ + ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
- **Medium Priority** (0.54-0.7): ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡∏ó‡∏µ‡∏°‡∏õ‡∏Å‡∏ï‡∏¥ + ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô
- **Low Priority** (< 0.54): ‡∏™‡πà‡∏á email/SMS ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

**3. Focus Groups:**

- **Balance ‡∏™‡∏π‡∏á + NumOfProducts ‡∏°‡∏≤‡∏Å** ‚Üí ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á
- **‡πÑ‡∏°‡πà Active + Balance ‡∏ï‡πà‡∏≥** ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏π‡πÅ‡∏•‡∏û‡∏¥‡πÄ‡∏®‡∏©
- **Tenure ‡∏™‡∏±‡πâ‡∏ô + Age ‡∏°‡∏≤‡∏Å** ‚Üí ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á

## Conclusion

**‚úÖ Run #2.2 ‡∏Ñ‡∏∑‡∏≠ Final Model ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î!**

**‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•:**

1. ‚úÖ **F1 Score ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î** (58.11%) - Balance ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
2. ‚úÖ **ROI ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î** (5,789%) - ‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
3. ‚úÖ **Precision ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î** (49.54%) - ‡∏•‡∏î False Positive
4. ‚úÖ **Recall ‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢** (70.26%) - ‡∏à‡∏±‡∏ö Churn ‡πÑ‡∏î‡πâ‡∏î‡∏µ
5. ‚úÖ **‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î** (217,000 ‡∏ö‡∏≤‡∏ó) - ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏™‡∏∏‡∏î
6. ‚úÖ **‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£ Deploy** - ‡πÉ‡∏ä‡πâ model ‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏Ñ‡πà‡∏õ‡∏£‡∏±‡∏ö threshold

**‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ Run #2.2 ‡πÄ‡∏õ‡πá‡∏ô Production Model!** ‚≠ê

## Plots & Visualizations

### Model Performance Curves

**ROC Curves Comparison:**

ROC (Receiver Operating Characteristic) Curve ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á True Positive Rate (Recall) ‡πÅ‡∏•‡∏∞ False Positive Rate ‡∏ó‡∏µ‡πà threshold ‡∏ï‡πà‡∏≤‡∏á‡πÜ

- **XGBoost (‡∏™‡∏µ‡∏™‡πâ‡∏°)**: ROC-AUC = **0.846** - ‡∏î‡∏µ‡∏°‡∏≤‡∏Å!
  - ‡πÄ‡∏™‡πâ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏°‡∏∏‡∏°‡∏ö‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ ‚Üí model ‡πÅ‡∏¢‡∏Å‡πÅ‡∏¢‡∏∞‡πÑ‡∏î‡πâ‡∏î‡∏µ
  - AUC ‡∏™‡∏π‡∏á = ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å Churn/Not Churn ‡∏î‡∏µ
- **Logistic Regression (‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π)**: ROC-AUC = 0.762
  - ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ XGBoost ‡πÅ‡∏ï‡πà‡∏Å‡πá‡∏¢‡∏±‡∏á‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ Random Classifier (‡πÄ‡∏™‡πâ‡∏ô‡∏õ‡∏£‡∏∞)
- **Random Classifier (‡πÄ‡∏™‡πâ‡∏ô‡∏õ‡∏£‡∏∞)**: AUC = 0.5
  - Baseline ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö

**Insight:** XGBoost ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ Logistic Regression ‡∏ñ‡∏∂‡∏á 8.4% ‡πÉ‡∏ô ROC-AUC!

<img src="../../plots/run_2.2/roc_curves.png" alt="ROC Curves" width="600"/>

**Precision-Recall Curves:**

PR Curve ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Precision ‡πÅ‡∏•‡∏∞ Recall ‡∏ó‡∏µ‡πà threshold ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö imbalanced data

- **XGBoost (‡∏™‡∏µ‡∏™‡πâ‡∏°)**:
  - ‡πÄ‡∏™‡πâ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ ‚Üí Balance ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Precision & Recall ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤
  - ‡∏ó‡∏µ‡πà Recall ~70%, Precision ~50% (threshold 0.54)
  - Area Under Curve ‡∏™‡∏π‡∏á = model ‡∏î‡∏µ
- **Logistic Regression (‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π)**:
  - ‡πÄ‡∏™‡πâ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏á‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ XGBoost
  - Precision ‡∏•‡∏î‡∏•‡∏á‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠ Recall ‡πÄ‡∏û‡∏¥‡πà‡∏°

**Trade-off:**

- ‡πÄ‡∏û‡∏¥‡πà‡∏° Recall (‡∏à‡∏±‡∏ö Churn ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô) ‚Üí Precision ‡∏•‡∏î‡∏•‡∏á (‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ú‡∏¥‡∏î‡∏Ñ‡∏ô‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô)
- ‡∏•‡∏î Recall (‡∏à‡∏±‡∏ö Churn ‡πÑ‡∏î‡πâ‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á) ‚Üí Precision ‡πÄ‡∏û‡∏¥‡πà‡∏° (‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ú‡∏¥‡∏î‡∏Ñ‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á)

**Insight:** XGBoost ‡πÉ‡∏´‡πâ balance ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ LR ‡∏ó‡∏µ‡πà‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ç‡∏≠‡∏á Recall!

<img src="../../plots/run_2.2/precision_recall_curves.png" alt="Precision-Recall Curves" width="600"/>

### Feature Importance

**Logistic Regression Feature Importance:**

Feature Importance ‡∏à‡∏≤‡∏Å Logistic Regression ‡πÅ‡∏™‡∏î‡∏á coefficient ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ feature (‡∏´‡∏•‡∏±‡∏á OneHot Encoding)

**Top Features (Positive - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn):**

- üî¥ **Age 51-60** (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß): coefficient ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ‚Üí ‡∏≠‡∏≤‡∏¢‡∏∏ 51-60 ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn ‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å
- üî¥ **Age 41-50** (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß): ‡∏≠‡∏≤‡∏¢‡∏∏ 41-50 ‡∏Å‡πá‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn ‡∏™‡∏π‡∏á
- üî¥ **Age >60** (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß): ‡∏≠‡∏≤‡∏¢‡∏∏‡∏°‡∏≤‡∏Å‡∏Å‡πá‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á
- üî¥ **Geography_Germany** (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß): ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏ô‡∏µ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn ‡∏™‡∏π‡∏á
- üî¥ **Gender_Female** (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß): ‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤

**Top Features (Negative - ‡∏•‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn):**

- üîµ **Age <20** (‡∏™‡∏µ‡πÅ‡∏î‡∏á): ‡∏≠‡∏≤‡∏¢‡∏∏‡∏ô‡πâ‡∏≠‡∏¢‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn ‡∏ï‡πà‡∏≥
- üîµ **Age 20-30** (‡∏™‡∏µ‡πÅ‡∏î‡∏á): ‡∏≠‡∏≤‡∏¢‡∏∏ 20-30 ‡∏Å‡πá‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn ‡∏ï‡πà‡∏≥
- üîµ **Gender_Male** (‡∏™‡∏µ‡πÅ‡∏î‡∏á): ‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤
- üîµ **Geography_France** (‡∏™‡∏µ‡πÅ‡∏î‡∏á): ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á‡πÄ‡∏®‡∏™‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn ‡∏ï‡πà‡∏≥
- üîµ **Balance_Low** (‡∏™‡∏µ‡πÅ‡∏î‡∏á): Balance ‡∏ï‡πà‡∏≥‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ Churn ‡∏ï‡πà‡∏≥

**Insight:** ‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô LR! ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏ 41-60 ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á

<img src="../../plots/run_2.2/feature_importance_lr.png" alt="Feature Importance - LR" width="600"/>

**XGBoost Feature Importance:**

Feature Importance ‡∏à‡∏≤‡∏Å XGBoost ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà feature ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á (split) ‡πÉ‡∏ô decision trees

**Top 5 Features:**

1. **NumOfProducts** (80.0): ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î!
   - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏ö‡πà‡∏á‡∏´‡∏•‡∏±‡∏Å
   - ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ 1 ‡∏´‡∏£‡∏∑‡∏≠ >2 ‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á
2. **Age** (69.0): ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å
   - ‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 2
   - ‡∏≠‡∏≤‡∏¢‡∏∏‡∏°‡∏≤‡∏Å‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á
3. **EstimatedSalary** (61.0): ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á
   - ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à Churn
4. **Geography** (42.0): ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á
   - ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏ö‡πâ‡∏≤‡∏á
5. **Balance** (41.0): ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á
   - Balance ‡∏™‡∏π‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á (‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö SHAP!)

**Insight:** NumOfProducts ‡πÅ‡∏•‡∏∞ Age ‡πÄ‡∏õ‡πá‡∏ô 2 features ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô XGBoost!

**‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö SHAP:**

- SHAP ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ Balance ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (impact ‡∏ï‡πà‡∏≠ prediction)
- Feature Importance ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ NumOfProducts ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)
- **‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Å‡∏±‡∏ô!**

<img src="../../plots/run_2.2/feature_importance_xgb.png" alt="Feature Importance - XGBoost" width="600"/>

### Complete List of Visualizations

**All visualizations saved in:** `plots/run_2.2/`

- ‚úÖ `confusion_matrix_lr.png` - Confusion Matrix (Logistic Regression)
- ‚úÖ `confusion_matrix_xgb.png` - Confusion Matrix (XGBoost)
- ‚úÖ `roc_curves.png` - ROC Curves Comparison
- ‚úÖ `precision_recall_curves.png` - Precision-Recall Curves
- ‚úÖ `feature_importance_lr.png` - Feature Importance (LR)
- ‚úÖ `feature_importance_xgb.png` - Feature Importance (XGBoost)
- ‚úÖ `shap_summary.png` - SHAP Summary Plot
- ‚úÖ `shap_bar.png` - SHAP Feature Importance
- ‚úÖ `shap_waterfall_sample0.png` - SHAP Waterfall (Sample 0)
- ‚úÖ `shap_waterfall_churn.png` - SHAP Waterfall (Churned Customer)
- ‚úÖ `shap_dependence_top.png` - SHAP Dependence Plot (Balance)

---

[‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ](../RESULTS.md)
